<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Brain Health Assessment Results</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 40px auto;
      padding: 20px;
      color: #222;
    }

    h1 {
      margin-bottom: 10px;
    }

    .section {
      margin-top: 30px;
      padding: 20px;
      border-radius: 8px;
      background: #f6f8fa;
    }

    .persona-title {
      font-weight: bold;
      font-size: 18px;
      margin-bottom: 6px;
    }

    .message {
      color: #444;
    }

    img {
      display: block;
      margin: 30px auto;
      max-width: 100%;
    }
  </style>
</head>
<body>

<h1>Your Brain Health Profile</h1>
<p>This assessment reflects your current mindset, knowledge, and cognitive experience.</p>

<img id="chart" alt="Brain Health Radar Chart">

<div class="section">
  <div class="persona-title" id="attitudePersona"></div>
  <div class="message" id="attitudeMessage"></div>
</div>

<div class="section">
  <div class="persona-title" id="knowledgePersona"></div>
  <div class="message" id="knowledgeMessage"></div>
</div>

<div class="section">
  <div class="persona-title" id="conditionPersona"></div>
  <div class="message" id="conditionMessage"></div>
</div>

<script>
  // -----------------------------
  // 1. READ SCORES FROM URL
  // -----------------------------
  const params = new URLSearchParams(window.location.search);

  const attitude = Number(params.get('att'));
  const knowledge = Number(params.get('know'));
  const condition = Number(params.get('cond'));

  // -----------------------------
  // 2. PERSONA LOGIC FUNCTIONS
  // -----------------------------
  function getAttitudePersona(score) {
    if (score >= 10) return [
      "Attitude: Brain Health Champion",
      "You already value and prioritize your brain health—now it’s about refining and sustaining your approach."
    ];
    if (score >= 7) return [
      "Attitude: Brain Health Aware",
      "You recognize the importance of brain health. With a few intentional steps, you can strengthen your impact."
    ];
    if (score >= 4) return [
      "Attitude: Brain Health Passive",
      "Small changes can make a meaningful difference in how your brain functions and ages."
    ];
    return [
      "Attitude: Brain Health Disengaged",
      "Understanding how daily choices affect your brain is the first step toward lasting mental vitality."
    ];
  }

  function getKnowledgePersona(score) {
    if (score >= 17) return [
      "Knowledge: Brain Health Informed",
      "You have a solid foundation of brain health knowledge—now it’s about applying it consistently."
    ];
    if (score >= 13) return [
      "Knowledge: Brain Health Literate",
      "You’re well-informed, and a few refinements could significantly improve your results."
    ];
    if (score >= 9) return [
      "Knowledge: Brain Health Developing",
      "Learning a few core principles can dramatically improve how you support your brain."
    ];
    return [
      "Knowledge: Brain Health Uninformed",
      "Brain health is more influenced by daily habits than most people realize."
    ];
  }

  function getConditionPersona(score) {
    if (score >= 22) return [
      "Condition: Brain Health Resilient",
      "Your brain appears to be functioning at a high level—protecting this resilience is key."
    ];
    if (score >= 17) return [
      "Condition: Brain Health Stable",
      "Your brain health is solid, with room to improve consistency and recovery."
    ];
    if (score >= 12) return [
      "Condition: Brain Health Strained",
      "Your brain may be under strain—supportive changes could lead to noticeable improvement."
    ];
    return [
      "Condition: Brain Health Compromised",
      "Your results suggest your brain may need focused support to regain clarity and resilience."
    ];
  }

  // -----------------------------
  // 3. APPLY PERSONAS TO PAGE
  // -----------------------------
  const [attTitle, attMsg] = getAttitudePersona(attitude);
  const [knowTitle, knowMsg] = getKnowledgePersona(knowledge);
  const [condTitle, condMsg] = getConditionPersona(condition);

  document.getElementById("attitudePersona").textContent = attTitle;
  document.getElementById("attitudeMessage").textContent = attMsg;

  document.getElementById("knowledgePersona").textContent = knowTitle;
  document.getElementById("knowledgeMessage").textContent = knowMsg;

  document.getElementById("conditionPersona").textContent = condTitle;
  document.getElementById("conditionMessage").textContent = condMsg;

  // -----------------------------
  // 4. QUICKCHART RADAR CHART
  // -----------------------------
  const chartConfig = {
    type: 'radar',
    data: {
      labels: ['Attitude', 'Knowledge', 'Condition'],
      datasets: [{
        label: 'Brain Health Profile',
        data: [attitude, knowledge, condition],
        backgroundColor: 'rgba(54,162,235,0.2)',
        borderColor: 'rgba(54,162,235,1)',
        pointBackgroundColor: 'rgba(54,162,235,1)',
        borderWidth: 2
      }]
    },
    options: {
      scales: {
        r: {
          beginAtZero: true,
          suggestedMax: 28
        }
      }
    }
  };

  const chartUrl =
    "https://quickchart.io/chart?c=" +
    encodeURIComponent(JSON.stringify(chartConfig));

  document.getElementById("chart").src = chartUrl;
</script>

</body>
</html>
